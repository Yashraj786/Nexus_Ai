<div class="min-h-screen flex items-center justify-center px-4 sm:px-6 bg-white" data-controller="password-toggle">
  <div class="w-full max-w-sm">
    <!-- Logo & Branding -->
    <div class="mb-12 text-center">
      <a href="<%= root_path %>" class="inline-flex items-center gap-2.5 hover:opacity-80 transition-opacity mb-8">
        <div class="w-10 h-10 bg-black rounded-lg flex items-center justify-center">
          <i data-lucide="sparkles" class="w-5 h-5 text-white"></i>
        </div>
        <span class="text-xl font-semibold text-neutral-900">Nexus</span>
      </a>
      
      <h1 class="text-2xl sm:text-3xl font-bold text-neutral-950 mb-2.5 tracking-tight">Get started</h1>
      <p class="text-sm text-neutral-600">Create your account and start using multi-model AI</p>
    </div>

    <!-- Signup Form -->
    <div class="space-y-6">
      <%= simple_form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %>
         <!-- Error Messages -->
         <% if resource.errors.any? %>
           <div class="p-4 rounded-xl bg-red-50 border border-red-200/50 space-y-3">
             <div class="flex items-start gap-3">
               <i data-lucide="alert-circle" class="w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"></i>
               <div>
                 <p class="text-sm font-semibold text-red-900"><%= pluralize(resource.errors.count, "error") %> found</p>
                 <ul class="mt-2 space-y-1">
                   <% resource.errors.full_messages.each do |message| %>
                     <li class="text-xs text-red-700">• <%= message %></li>
                   <% end %>
                 </ul>
               </div>
             </div>
           </div>
         <% end %>

         <!-- Email Input -->
         <div class="space-y-2">
           <%= f.label :email, "Email", class: "block text-sm font-medium text-neutral-700" %>
           <%= f.email_field :email,
               required: true,
               autofocus: true,
               placeholder: "you@example.com",
               class: "w-full px-4 py-2.5 bg-white border border-neutral-300 rounded-lg text-sm text-neutral-900 placeholder-neutral-500 transition-all focus:outline-none focus:ring-2 focus:ring-black focus:ring-offset-0 focus:border-transparent",
               autocomplete: "email" %>
           <p class="text-xs text-neutral-600">We'll never share your email.</p>
         </div>

         <!-- Password Input with Toggle -->
         <div class="space-y-2">
           <label class="block text-sm font-medium text-neutral-700">Password</label>
           <div class="relative">
             <%= f.password_field :password,
                 required: true,
                 placeholder: "••••••••",
                 class: "w-full px-4 py-2.5 pr-12 bg-white border border-neutral-300 rounded-lg text-sm text-neutral-900 placeholder-neutral-500 transition-all focus:outline-none focus:ring-2 focus:ring-black focus:ring-offset-0 focus:border-transparent",
                 autocomplete: "new-password",
                 data: { password_toggle_target: "input" } %>
             <button type="button" 
                     class="absolute right-4 top-1/2 -translate-y-1/2 text-neutral-400 hover:text-neutral-600 transition-colors p-1" 
                     data-action="click->password-toggle#toggle"
                     title="Show/hide password"
                     tabindex="-1">
               <i data-lucide="eye" class="w-4 h-4" data-password-toggle-target="eyeIcon"></i>
             </button>
           </div>
           <% if @minimum_password_length %>
             <p class="text-xs text-neutral-600"><%= @minimum_password_length %> characters minimum</p>
           <% end %>
         </div>

         <!-- Password Confirmation Input with Toggle -->
         <div class="space-y-2">
           <label class="block text-sm font-medium text-neutral-700">Confirm password</label>
           <div class="relative">
             <%= f.password_field :password_confirmation,
                 required: true,
                 placeholder: "••••••••",
                 class: "w-full px-4 py-2.5 pr-12 bg-white border border-neutral-300 rounded-lg text-sm text-neutral-900 placeholder-neutral-500 transition-all focus:outline-none focus:ring-2 focus:ring-black focus:ring-offset-0 focus:border-transparent",
                 autocomplete: "new-password",
                 data: { password_toggle_target: "input" } %>
             <button type="button" 
                     class="absolute right-4 top-1/2 -translate-y-1/2 text-neutral-400 hover:text-neutral-600 transition-colors p-1" 
                     data-action="click->password-toggle#toggle"
                     title="Show/hide password"
                     tabindex="-1">
               <i data-lucide="eye" class="w-4 h-4" data-password-toggle-target="eyeIcon"></i>
             </button>
           </div>
         </div>

         <!-- Terms Checkbox -->
         <div class="flex items-start gap-3">
           <input type="checkbox" id="terms_agree" class="w-4 h-4 mt-1.5 rounded border-neutral-300 text-black focus:ring-2 focus:ring-black focus:ring-offset-1 cursor-pointer accent-black" required>
           <label for="terms_agree" class="text-xs text-neutral-700 cursor-pointer leading-5">
             I agree to the <a href="#" class="text-neutral-900 hover:underline font-medium">Terms of Service</a> and <a href="#" class="text-neutral-900 hover:underline font-medium">Privacy Policy</a>
           </label>
         </div>

         <!-- Submit Button -->
         <%= f.button :submit, "Create account", class: "w-full bg-black text-white py-2.5 rounded-lg text-sm font-semibold hover:bg-neutral-800 active:scale-95 transition-all duration-150" %>
       <% end %>

       <!-- Divider -->
       <div class="relative">
         <div class="absolute inset-0 flex items-center">
           <div class="w-full border-t border-neutral-200"></div>
         </div>
         <div class="relative flex justify-center">
           <span class="px-2 bg-white text-xs text-neutral-500 font-medium">Already have an account?</span>
         </div>
       </div>

       <!-- Sign In Link -->
       <%= link_to new_session_path(resource_name), class: "w-full flex items-center justify-center gap-2 px-4 py-2.5 border border-neutral-300 rounded-lg text-sm font-medium text-neutral-900 hover:bg-neutral-50 transition-colors" do %>
         <i data-lucide="arrow-right" class="w-4 h-4"></i>
         Sign in instead
       <% end %>
     </div>

    <!-- Footer -->
    <div class="mt-8 pt-8 border-t border-neutral-200 text-center">
       <%= link_to root_path, class: "inline-flex items-center gap-2 text-neutral-600 hover:text-neutral-900 text-xs font-medium transition-colors" do %>
         <i data-lucide="arrow-left" class="w-3 h-3"></i>
         Back to home
       <% end %>
     </div>
   </div>
 </div>
